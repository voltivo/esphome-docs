
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>I2CComponent &#8212; esphomelib 1.9.3 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="canonical" href="https://esphomelib.com/api/core/i2c.html" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Automation" href="automation.html" />
    <link rel="prev" title="Deep Sleep" href="deep-sleep.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
    <link rel="apple-touch-icon" href="../../_static/apple-touch-icon.png" />
  
  
    <link rel="canonical" href="https://esphomelib.com/api/core/i2c.html"/>
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo-full.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">I2CComponent</a><ul>
<li><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="i2ccomponent">
<h1>I2CComponent<a class="headerlink" href="#i2ccomponent" title="Permalink to this headline">¶</a></h1>
<p>To make i2c devices easier to implement in esphomelib, there’s a special I2CComponent implementing
a bunch of i2c helper functions on top of the Arduino Wire library. It is also the preferred way
of using i2c peripherals since it implements timeouts, verbose logs for debugging issues, and
for the ESP32 the ability to have multiple i2c busses in operation at the same time.</p>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="_CPPv312I2CComponent">
<span id="_CPPv212I2CComponent"></span><span id="I2CComponent"></span><span class="target" id="class_i2_c_component"></span><em class="property">class </em><code class="descname">I2CComponent</code> : <em class="property">public</em> <a class="reference internal" href="component.html#_CPPv39Component" title="Component">Component</a><a class="headerlink" href="#_CPPv312I2CComponent" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The <a class="reference internal" href="#class_i2_c_component"><span class="std std-ref">I2CComponent</span></a> is the base of esphomelib’s i2c communication. </p>
<p>It handles setting up the bus (with pins, clock frequency) and provides nice helper functions to make reading from the i2c bus easier (see read_bytes, write_bytes) and safe (with read timeouts).</p>
<p>For the user, it has a few setters (see set_sda_pin, set_scl_pin, set_frequency) to setup some parameters for the bus. Additionally, the i2c component has a scan feature that will scan the entire 7-bit i2c address range for devices that respond to transmissions to make finding the address of an i2c device easier.</p>
<p>On the ESP32, you can even have multiple I2C bus for communication, simply create multiple I2CComponents, each with different SDA and SCL pins and use <code class="docutils literal notranslate"><span class="pre">set_parent</span></code> on all I2CDevices that use the non-first I2C bus. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv3N12I2CComponent12I2CComponentE7uint8_t7uint8_tb">
<span id="_CPPv2N12I2CComponent12I2CComponentE7uint8_t7uint8_tb"></span><span id="I2CComponent::I2CComponent__uint8_t.uint8_t.b"></span><span class="target" id="class_i2_c_component_1ad7ebab007ce5f51217c06677f22406fc"></span><code class="descname">I2CComponent</code><span class="sig-paren">(</span>uint8_t <em>sda_pin</em>, uint8_t <em>scl_pin</em>, bool <em>scan</em> = false<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent12I2CComponentE7uint8_t7uint8_tb" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent11set_sda_pinE7uint8_t">
<span id="_CPPv2N12I2CComponent11set_sda_pinE7uint8_t"></span><span id="I2CComponent::set_sda_pin__uint8_t"></span><span class="target" id="class_i2_c_component_1aa3e1ec4ff60ed139f7140c5f3c12e400"></span>void <code class="descname">set_sda_pin</code><span class="sig-paren">(</span>uint8_t <em>sda_pin</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent11set_sda_pinE7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the i2c SDA pin for this bus. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent11set_scl_pinE7uint8_t">
<span id="_CPPv2N12I2CComponent11set_scl_pinE7uint8_t"></span><span id="I2CComponent::set_scl_pin__uint8_t"></span><span class="target" id="class_i2_c_component_1a9d9bee3f188d2c2de23a61053d768d9d"></span>void <code class="descname">set_scl_pin</code><span class="sig-paren">(</span>uint8_t <em>scl_pin</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent11set_scl_pinE7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the i2c SCL pin for this bus. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent13set_frequencyE8uint32_t">
<span id="_CPPv2N12I2CComponent13set_frequencyE8uint32_t"></span><span id="I2CComponent::set_frequency__uint32_t"></span><span class="target" id="class_i2_c_component_1afb7f451795c150456a7a21bf4f7bc624"></span>void <code class="descname">set_frequency</code><span class="sig-paren">(</span>uint32_t <em>frequency</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent13set_frequencyE8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the i2c clock frequency in Hz for this bus, defaults to 1000 Hz. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent8set_scanEb">
<span id="_CPPv2N12I2CComponent8set_scanEb"></span><span id="I2CComponent::set_scan__b"></span><span class="target" id="class_i2_c_component_1a9fc7ddc8aac017e53daa1de56574417c"></span>void <code class="descname">set_scan</code><span class="sig-paren">(</span>bool <em>scan</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent8set_scanEb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set if a scan of the entire i2c address range should be done on startup. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent10read_bytesE7uint8_t7uint8_tP7uint8_t7uint8_t8uint32_t">
<span id="_CPPv2N12I2CComponent10read_bytesE7uint8_t7uint8_tP7uint8_t7uint8_t8uint32_t"></span><span id="I2CComponent::read_bytes__uint8_t.uint8_t.uint8_tP.uint8_t.uint32_t"></span><span class="target" id="class_i2_c_component_1aa1fc27ca10b5b656a689bac1495b8d4e"></span>bool <code class="descname">read_bytes</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint8_t <em>register_</em>, uint8_t *<em>data</em>, uint8_t <em>len</em>, uint32_t <em>conversion</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent10read_bytesE7uint8_t7uint8_tP7uint8_t7uint8_t8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read len amount of bytes from a register into data. </p>
<p>Optionally with a conversion time after writing the register value to the bus.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>If the operation was successful. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">address</span></code>: The address to send the request to. </li>
<li><code class="docutils literal notranslate"><span class="pre">register_</span></code>: The register number to write to the bus before reading. </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: An array to store len amount of 8-bit bytes into. </li>
<li><code class="docutils literal notranslate"><span class="pre">len</span></code>: The amount of bytes to request and write into data. </li>
<li><code class="docutils literal notranslate"><span class="pre">conversion</span></code>: The time in ms between writing the register value and reading out the value. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent13read_bytes_16E7uint8_t7uint8_tP8uint16_t7uint8_t8uint32_t">
<span id="_CPPv2N12I2CComponent13read_bytes_16E7uint8_t7uint8_tP8uint16_t7uint8_t8uint32_t"></span><span id="I2CComponent::read_bytes_16__uint8_t.uint8_t.uint16_tP.uint8_t.uint32_t"></span><span class="target" id="class_i2_c_component_1a059c342c7b01a28430e46b65ac278c13"></span>bool <code class="descname">read_bytes_16</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint8_t <em>register_</em>, uint16_t *<em>data</em>, uint8_t <em>len</em>, uint32_t <em>conversion</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent13read_bytes_16E7uint8_t7uint8_tP8uint16_t7uint8_t8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read len amount of 16-bit words (MSB first) from a register into data. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>If the operation was successful. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">address</span></code>: The address to send the request to. </li>
<li><code class="docutils literal notranslate"><span class="pre">register_</span></code>: The register number to write to the bus before reading. </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: An array to store len amount of 16-bit words into. </li>
<li><code class="docutils literal notranslate"><span class="pre">len</span></code>: The amount of 16-bit words to request and write into data. </li>
<li><code class="docutils literal notranslate"><span class="pre">conversion</span></code>: The time in ms between writing the register value and reading out the value. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent9read_byteE7uint8_t7uint8_tP7uint8_t8uint32_t">
<span id="_CPPv2N12I2CComponent9read_byteE7uint8_t7uint8_tP7uint8_t8uint32_t"></span><span id="I2CComponent::read_byte__uint8_t.uint8_t.uint8_tP.uint32_t"></span><span class="target" id="class_i2_c_component_1afe92407fab397e7ab518c0c3c07eb733"></span>bool <code class="descname">read_byte</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint8_t <em>register_</em>, uint8_t *<em>data</em>, uint32_t <em>conversion</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent9read_byteE7uint8_t7uint8_tP7uint8_t8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read a single byte from a register into the data variable. Return true if successful. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent12read_byte_16E7uint8_t7uint8_tP8uint16_t8uint32_t">
<span id="_CPPv2N12I2CComponent12read_byte_16E7uint8_t7uint8_tP8uint16_t8uint32_t"></span><span id="I2CComponent::read_byte_16__uint8_t.uint8_t.uint16_tP.uint32_t"></span><span class="target" id="class_i2_c_component_1aef85b5def2ed3ecf5d35e55e86e85255"></span>bool <code class="descname">read_byte_16</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint8_t <em>register_</em>, uint16_t *<em>data</em>, uint32_t <em>conversion</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent12read_byte_16E7uint8_t7uint8_tP8uint16_t8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read a single 16-bit words (MSB first) from a register into the data variable. Return true if successful. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent11write_bytesE7uint8_t7uint8_tPK7uint8_t7uint8_t">
<span id="_CPPv2N12I2CComponent11write_bytesE7uint8_t7uint8_tPK7uint8_t7uint8_t"></span><span id="I2CComponent::write_bytes__uint8_t.uint8_t.uint8_tCP.uint8_t"></span><span class="target" id="class_i2_c_component_1a7e97dd50c6cd66da576fb7f43d5ce9f9"></span>bool <code class="descname">write_bytes</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint8_t <em>register_</em>, <em class="property">const</em> uint8_t *<em>data</em>, uint8_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent11write_bytesE7uint8_t7uint8_tPK7uint8_t7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write len amount of 8-bit bytes to the specified register for address. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>If the operation was successful. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">address</span></code>: The address to use for the transmission. </li>
<li><code class="docutils literal notranslate"><span class="pre">register_</span></code>: The register to write the values to. </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: An array from which len bytes of data will be written to the bus. </li>
<li><code class="docutils literal notranslate"><span class="pre">len</span></code>: The amount of bytes to write to the bus. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent14write_bytes_16E7uint8_t7uint8_tPK8uint16_t7uint8_t">
<span id="_CPPv2N12I2CComponent14write_bytes_16E7uint8_t7uint8_tPK8uint16_t7uint8_t"></span><span id="I2CComponent::write_bytes_16__uint8_t.uint8_t.uint16_tCP.uint8_t"></span><span class="target" id="class_i2_c_component_1abbbadce4bd59048a2bc0f3bcbcfc88f8"></span>bool <code class="descname">write_bytes_16</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint8_t <em>register_</em>, <em class="property">const</em> uint16_t *<em>data</em>, uint8_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent14write_bytes_16E7uint8_t7uint8_tPK8uint16_t7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write len amount of 16-bit words (MSB first) to the specified register for address. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>If the operation was successful. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">address</span></code>: The address to use for the transmission. </li>
<li><code class="docutils literal notranslate"><span class="pre">register_</span></code>: The register to write the values to. </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: An array from which len 16-bit words of data will be written to the bus. </li>
<li><code class="docutils literal notranslate"><span class="pre">len</span></code>: The amount of bytes to write to the bus. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent10write_byteE7uint8_t7uint8_t7uint8_t">
<span id="_CPPv2N12I2CComponent10write_byteE7uint8_t7uint8_t7uint8_t"></span><span id="I2CComponent::write_byte__uint8_t.uint8_t.uint8_t"></span><span class="target" id="class_i2_c_component_1ad529c7eafa6017d84f36386439d68365"></span>bool <code class="descname">write_byte</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint8_t <em>register_</em>, uint8_t <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent10write_byteE7uint8_t7uint8_t7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write a single byte of data into the specified register of address. Return true if successful. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent13write_byte_16E7uint8_t7uint8_t8uint16_t">
<span id="_CPPv2N12I2CComponent13write_byte_16E7uint8_t7uint8_t8uint16_t"></span><span id="I2CComponent::write_byte_16__uint8_t.uint8_t.uint16_t"></span><span class="target" id="class_i2_c_component_1ade9d31aeac5148e5ae2d7d189f6f4879"></span>bool <code class="descname">write_byte_16</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint8_t <em>register_</em>, uint16_t <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent13write_byte_16E7uint8_t7uint8_t8uint16_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write a single 16-bit word of data into the specified register of address. Return true if successful. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent19begin_transmission_E7uint8_t">
<span id="_CPPv2N12I2CComponent19begin_transmission_E7uint8_t"></span><span id="I2CComponent::begin_transmission___uint8_t"></span><span class="target" id="class_i2_c_component_1ae5fdefeb5912483168f92f8e161a44ec"></span>void <code class="descname">begin_transmission_</code><span class="sig-paren">(</span>uint8_t <em>address</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent19begin_transmission_E7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Begin a write transmission to an address. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent17end_transmission_E7uint8_t">
<span id="_CPPv2N12I2CComponent17end_transmission_E7uint8_t"></span><span id="I2CComponent::end_transmission___uint8_t"></span><span class="target" id="class_i2_c_component_1a03608623b89677ae7d546b7031ea3068"></span>bool <code class="descname">end_transmission_</code><span class="sig-paren">(</span>uint8_t <em>address</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent17end_transmission_E7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>End a write transmission to an address, return true if successful. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent13request_from_E7uint8_t7uint8_t">
<span id="_CPPv2N12I2CComponent13request_from_E7uint8_t7uint8_t"></span><span id="I2CComponent::request_from___uint8_t.uint8_t"></span><span class="target" id="class_i2_c_component_1a15b196d795c0ce27dafd1ab0253c69e8"></span>bool <code class="descname">request_from_</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint8_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent13request_from_E7uint8_t7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Request data from an address with a number of (8-bit) bytes. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>True if all requested bytes were read, false otherwise. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">address</span></code>: The address to request the bytes from. </li>
<li><code class="docutils literal notranslate"><span class="pre">len</span></code>: The number of bytes to receive, must not be 0. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt>
<span class="target" id="class_i2_c_component_1a55ebcda182c80278c9ede1b15ae19971"></span><code class="descname">void HOT I2CComponent::write_(uint8_t address, const uint8_t * data, uint8_t len)</code></dt>
<dd><p>Write len amount of bytes from data to address. begin_transmission_ must be called before this. </p>
</dd></dl>

<dl class="function">
<dt>
<span class="target" id="class_i2_c_component_1af2782e9ac8ba3986ed36c351dc764b4e"></span><code class="descname">void HOT I2CComponent::write_16_(uint8_t address, const uint16_t * data, uint8_t len)</code></dt>
<dd><p>Write len amount of 16-bit words from data to address. begin_transmission_ must be called before this. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent8receive_E7uint8_tP7uint8_t7uint8_t">
<span id="_CPPv2N12I2CComponent8receive_E7uint8_tP7uint8_t7uint8_t"></span><span id="I2CComponent::receive___uint8_t.uint8_tP.uint8_t"></span><span class="target" id="class_i2_c_component_1a3f8ecfd114c9f5ac4272bbff1aafea0c"></span>bool <code class="descname">receive_</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint8_t *<em>data</em>, uint8_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent8receive_E7uint8_tP7uint8_t7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Request len amount of bytes from address and write the result it into data. Returns true iff was successful. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent11receive_16_E7uint8_tP8uint16_t7uint8_t">
<span id="_CPPv2N12I2CComponent11receive_16_E7uint8_tP8uint16_t7uint8_t"></span><span id="I2CComponent::receive_16___uint8_t.uint16_tP.uint8_t"></span><span class="target" id="class_i2_c_component_1a4c9f67fa294c53dd8f1d0c17237a4597"></span>bool <code class="descname">receive_16_</code><span class="sig-paren">(</span>uint8_t <em>address</em>, uint16_t *<em>data</em>, uint8_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent11receive_16_E7uint8_tP8uint16_t7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Request len amount of 16-bit words from address and write the result into data. Returns true iff was successful. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent5setupEv">
<span id="_CPPv2N12I2CComponent5setupEv"></span><span id="I2CComponent::setup"></span><span class="target" id="class_i2_c_component_1a695df076ec833989078ef8cbef059922"></span>void <code class="descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent5setupEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Setup the i2c. bus. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N12I2CComponent11dump_configEv">
<span id="_CPPv2N12I2CComponent11dump_configEv"></span><span id="I2CComponent::dump_config"></span><span class="target" id="class_i2_c_component_1a402c50165f2cc055d4ea736f2908bb9f"></span>void <code class="descname">dump_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N12I2CComponent11dump_configEv" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv3NK12I2CComponent18get_setup_priorityEv">
<span id="_CPPv2NK12I2CComponent18get_setup_priorityEv"></span><span id="I2CComponent::get_setup_priorityC"></span><span class="target" id="class_i2_c_component_1a72746c6cd29256bac26eac6a4d2e76bc"></span>float <code class="descname">get_setup_priority</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv3NK12I2CComponent18get_setup_priorityEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set a very high setup priority to make sure it’s loaded before all other hardware. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Protected Attributes</p>
<dl class="member">
<dt id="_CPPv3N12I2CComponent5wire_E">
<span id="_CPPv2N12I2CComponent5wire_E"></span><span id="I2CComponent::wire___TwoWireP"></span><span class="target" id="class_i2_c_component_1ace53f749188525b2fb6945bbb497c2a1"></span>TwoWire *<code class="descname">wire_</code><a class="headerlink" href="#_CPPv3N12I2CComponent5wire_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N12I2CComponent8sda_pin_E">
<span id="_CPPv2N12I2CComponent8sda_pin_E"></span><span id="I2CComponent::sda_pin___uint8_t"></span><span class="target" id="class_i2_c_component_1a8482926a4b382688c1c05a15a26a5215"></span>uint8_t <code class="descname">sda_pin_</code><a class="headerlink" href="#_CPPv3N12I2CComponent8sda_pin_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N12I2CComponent8scl_pin_E">
<span id="_CPPv2N12I2CComponent8scl_pin_E"></span><span id="I2CComponent::scl_pin___uint8_t"></span><span class="target" id="class_i2_c_component_1ada540e2da69f3448d185e21ef70140e9"></span>uint8_t <code class="descname">scl_pin_</code><a class="headerlink" href="#_CPPv3N12I2CComponent8scl_pin_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N12I2CComponent5scan_E">
<span id="_CPPv2N12I2CComponent5scan_E"></span><span id="I2CComponent::scan___b"></span><span class="target" id="class_i2_c_component_1a0adc4dc9b0c974773652e938e0a16fbd"></span>bool <code class="descname">scan_</code><a class="headerlink" href="#_CPPv3N12I2CComponent5scan_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N12I2CComponent10frequency_E">
<span id="_CPPv2N12I2CComponent10frequency_E"></span><span id="I2CComponent::frequency___uint32_t"></span><span class="target" id="class_i2_c_component_1aa6efbb76264b09e8de2bf92cd6f5af3a"></span>uint32_t <code class="descname">frequency_</code> = {1000}<a class="headerlink" href="#_CPPv3N12I2CComponent10frequency_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt id="_CPPv39I2CDevice">
<span id="_CPPv29I2CDevice"></span><span id="I2CDevice"></span><span class="target" id="class_i2_c_device"></span><em class="property">class </em><code class="descname">I2CDevice</code><a class="headerlink" href="#_CPPv39I2CDevice" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>All components doing communication on the I2C bus should subclass <a class="reference internal" href="#class_i2_c_device"><span class="std std-ref">I2CDevice</span></a>. </p>
<p>This class stores 1. the address of the i2c device and has a helper function to allow users to manually set the address and 2. stores a reference to the “parent” <a class="reference internal" href="#class_i2_c_component"><span class="std std-ref">I2CComponent</span></a>.</p>
<p>All this class basically does is to expose all helper functions from <a class="reference internal" href="#class_i2_c_component"><span class="std std-ref">I2CComponent</span></a>. </p>
<p>Subclassed by <a class="reference internal" href="../display/ssd1306.html#classdisplay_1_1_i2_c_s_s_d1306"><span class="std std-ref">display::I2CSSD1306</span></a>, <a class="reference internal" href="../display/lcd_display.html#classdisplay_1_1_p_c_f8574_l_c_d_display"><span class="std std-ref">display::PCF8574LCDDisplay</span></a>, <a class="reference internal" href="../misc/pcf8574.html#classio_1_1_p_c_f8574_component"><span class="std std-ref">io::PCF8574Component</span></a>, <a class="reference internal" href="../output/pca9685.html#classoutput_1_1_p_c_a9685_output_component"><span class="std std-ref">output::PCA9685OutputComponent</span></a>, <a class="reference internal" href="../sensor/ads1115.html#classsensor_1_1_a_d_s1115_component"><span class="std std-ref">sensor::ADS1115Component</span></a>, <a class="reference internal" href="../sensor/bh1750.html#classsensor_1_1_b_h1750_sensor"><span class="std std-ref">sensor::BH1750Sensor</span></a>, <a class="reference internal" href="../sensor/bme280.html#classsensor_1_1_b_m_e280_component"><span class="std std-ref">sensor::BME280Component</span></a>, <a class="reference internal" href="../sensor/bme680.html#classsensor_1_1_b_m_e680_component"><span class="std std-ref">sensor::BME680Component</span></a>, <a class="reference internal" href="../sensor/bmp085.html#classsensor_1_1_b_m_p085_component"><span class="std std-ref">sensor::BMP085Component</span></a>, <a class="reference internal" href="../sensor/bmp280.html#classsensor_1_1_b_m_p280_component"><span class="std std-ref">sensor::BMP280Component</span></a>, <a class="reference internal" href="../sensor/dht12.html#classsensor_1_1_d_h_t12_component"><span class="std std-ref">sensor::DHT12Component</span></a>, <a class="reference internal" href="../sensor/hdc1080.html#classsensor_1_1_h_d_c1080_component"><span class="std std-ref">sensor::HDC1080Component</span></a>, <a class="reference internal" href="../sensor/hmc5883l.html#classsensor_1_1_h_m_c5883_l_component"><span class="std std-ref">sensor::HMC5883LComponent</span></a>, <a class="reference internal" href="../sensor/htu21d.html#classsensor_1_1_h_t_u21_d_component"><span class="std std-ref">sensor::HTU21DComponent</span></a>, <a class="reference internal" href="../sensor/ina219.html#classsensor_1_1_i_n_a219_component"><span class="std std-ref">sensor::INA219Component</span></a>, <a class="reference internal" href="../sensor/ina3221.html#classsensor_1_1_i_n_a3221_component"><span class="std std-ref">sensor::INA3221Component</span></a>, <a class="reference internal" href="../sensor/mpu6050.html#classsensor_1_1_m_p_u6050_component"><span class="std std-ref">sensor::MPU6050Component</span></a>, <a class="reference internal" href="../sensor/ms5611.html#classsensor_1_1_m_s5611_component"><span class="std std-ref">sensor::MS5611Component</span></a>, <a class="reference internal" href="../sensor/sht3xd.html#classsensor_1_1_s_h_t3_x_d_component"><span class="std std-ref">sensor::SHT3XDComponent</span></a>, <a class="reference internal" href="../sensor/tcs34725.html#classsensor_1_1_t_c_s34725_component"><span class="std std-ref">sensor::TCS34725Component</span></a>, <a class="reference internal" href="../sensor/tsl2561.html#classsensor_1_1_t_s_l2561_sensor"><span class="std std-ref">sensor::TSL2561Sensor</span></a></p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv3N9I2CDevice9I2CDeviceEP12I2CComponent7uint8_t">
<span id="_CPPv2N9I2CDevice9I2CDeviceEP12I2CComponent7uint8_t"></span><span id="I2CDevice::I2CDevice__I2CComponentP.uint8_t"></span><span class="target" id="class_i2_c_device_1a87ae91ef6192c3607796f0c9abd4d27d"></span><code class="descname">I2CDevice</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv312I2CComponent" title="I2CComponent">I2CComponent</a> *<em>parent</em>, uint8_t <em>address</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice9I2CDeviceEP12I2CComponent7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv3N9I2CDevice11set_addressE7uint8_t">
<span id="_CPPv2N9I2CDevice11set_addressE7uint8_t"></span><span id="I2CDevice::set_address__uint8_t"></span><span class="target" id="class_i2_c_device_1a2e60074fb6bd75b464de0b78b06c728f"></span>void <code class="descname">set_address</code><span class="sig-paren">(</span>uint8_t <em>address</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice11set_addressE7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Manually set the i2c address of this device. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N9I2CDevice10set_parentEP12I2CComponent">
<span id="_CPPv2N9I2CDevice10set_parentEP12I2CComponent"></span><span id="I2CDevice::set_parent__I2CComponentP"></span><span class="target" id="class_i2_c_device_1aa1b4b6ebb490c761e3443ff1270c5f83"></span>void <code class="descname">set_parent</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv312I2CComponent" title="I2CComponent">I2CComponent</a> *<em>parent</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice10set_parentEP12I2CComponent" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Manually set the parent i2c bus for this device. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Protected Functions</p>
<dl class="function">
<dt id="_CPPv3N9I2CDevice10read_bytesE7uint8_tP7uint8_t7uint8_t8uint32_t">
<span id="_CPPv2N9I2CDevice10read_bytesE7uint8_tP7uint8_t7uint8_t8uint32_t"></span><span id="I2CDevice::read_bytes__uint8_t.uint8_tP.uint8_t.uint32_t"></span><span class="target" id="class_i2_c_device_1af86064b339b499ceaf533d86a19a91e2"></span>bool <code class="descname">read_bytes</code><span class="sig-paren">(</span>uint8_t <em>register_</em>, uint8_t *<em>data</em>, uint8_t <em>len</em>, uint32_t <em>conversion</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice10read_bytesE7uint8_tP7uint8_t7uint8_t8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read len amount of bytes from a register into data. </p>
<p>Optionally with a conversion time after writing the register value to the bus.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>If the operation was successful. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">register_</span></code>: The register number to write to the bus before reading. </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: An array to store len amount of 8-bit bytes into. </li>
<li><code class="docutils literal notranslate"><span class="pre">len</span></code>: The amount of bytes to request and write into data. </li>
<li><code class="docutils literal notranslate"><span class="pre">conversion</span></code>: The time in ms between writing the register value and reading out the value. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N9I2CDevice13read_bytes_16E7uint8_tP8uint16_t7uint8_t8uint32_t">
<span id="_CPPv2N9I2CDevice13read_bytes_16E7uint8_tP8uint16_t7uint8_t8uint32_t"></span><span id="I2CDevice::read_bytes_16__uint8_t.uint16_tP.uint8_t.uint32_t"></span><span class="target" id="class_i2_c_device_1a5b1e0ac9ebcafbbe53fe20401bbd60cf"></span>bool <code class="descname">read_bytes_16</code><span class="sig-paren">(</span>uint8_t <em>register_</em>, uint16_t *<em>data</em>, uint8_t <em>len</em>, uint32_t <em>conversion</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice13read_bytes_16E7uint8_tP8uint16_t7uint8_t8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read len amount of 16-bit words (MSB first) from a register into data. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>If the operation was successful. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">register_</span></code>: The register number to write to the bus before reading. </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: An array to store len amount of 16-bit words into. </li>
<li><code class="docutils literal notranslate"><span class="pre">len</span></code>: The amount of 16-bit words to request and write into data. </li>
<li><code class="docutils literal notranslate"><span class="pre">conversion</span></code>: The time in ms between writing the register value and reading out the value. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N9I2CDevice9read_byteE7uint8_tP7uint8_t8uint32_t">
<span id="_CPPv2N9I2CDevice9read_byteE7uint8_tP7uint8_t8uint32_t"></span><span id="I2CDevice::read_byte__uint8_t.uint8_tP.uint32_t"></span><span class="target" id="class_i2_c_device_1a3e2fb42e8d3309b3ec2ef6cd6cd83a50"></span>bool <code class="descname">read_byte</code><span class="sig-paren">(</span>uint8_t <em>register_</em>, uint8_t *<em>data</em>, uint32_t <em>conversion</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice9read_byteE7uint8_tP7uint8_t8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read a single byte from a register into the data variable. Return true if successful. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N9I2CDevice12read_byte_16E7uint8_tP8uint16_t8uint32_t">
<span id="_CPPv2N9I2CDevice12read_byte_16E7uint8_tP8uint16_t8uint32_t"></span><span id="I2CDevice::read_byte_16__uint8_t.uint16_tP.uint32_t"></span><span class="target" id="class_i2_c_device_1a0ff6911693a91020da42015cfece75cf"></span>bool <code class="descname">read_byte_16</code><span class="sig-paren">(</span>uint8_t <em>register_</em>, uint16_t *<em>data</em>, uint32_t <em>conversion</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice12read_byte_16E7uint8_tP8uint16_t8uint32_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read a single 16-bit words (MSB first) from a register into the data variable. Return true if successful. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N9I2CDevice11write_bytesE7uint8_tPK7uint8_t7uint8_t">
<span id="_CPPv2N9I2CDevice11write_bytesE7uint8_tPK7uint8_t7uint8_t"></span><span id="I2CDevice::write_bytes__uint8_t.uint8_tCP.uint8_t"></span><span class="target" id="class_i2_c_device_1ac18cfd42da91ed78b4fa8981861f4ffb"></span>bool <code class="descname">write_bytes</code><span class="sig-paren">(</span>uint8_t <em>register_</em>, <em class="property">const</em> uint8_t *<em>data</em>, uint8_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice11write_bytesE7uint8_tPK7uint8_t7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write len amount of 8-bit bytes to the specified register. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>If the operation was successful. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">register_</span></code>: The register to write the values to. </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: An array from which len bytes of data will be written to the bus. </li>
<li><code class="docutils literal notranslate"><span class="pre">len</span></code>: The amount of bytes to write to the bus. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N9I2CDevice14write_bytes_16E7uint8_tPK8uint16_t7uint8_t">
<span id="_CPPv2N9I2CDevice14write_bytes_16E7uint8_tPK8uint16_t7uint8_t"></span><span id="I2CDevice::write_bytes_16__uint8_t.uint16_tCP.uint8_t"></span><span class="target" id="class_i2_c_device_1acfe12ff3734e60d5818c66a8bfa5fdcd"></span>bool <code class="descname">write_bytes_16</code><span class="sig-paren">(</span>uint8_t <em>register_</em>, <em class="property">const</em> uint16_t *<em>data</em>, uint8_t <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice14write_bytes_16E7uint8_tPK8uint16_t7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write len amount of 16-bit words (MSB first) to the specified register. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>If the operation was successful. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">register_</span></code>: The register to write the values to. </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: An array from which len 16-bit words of data will be written to the bus. </li>
<li><code class="docutils literal notranslate"><span class="pre">len</span></code>: The amount of bytes to write to the bus. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N9I2CDevice10write_byteE7uint8_t7uint8_t">
<span id="_CPPv2N9I2CDevice10write_byteE7uint8_t7uint8_t"></span><span id="I2CDevice::write_byte__uint8_t.uint8_t"></span><span class="target" id="class_i2_c_device_1a6469d3ef71bf4f6cbb5291041921253f"></span>bool <code class="descname">write_byte</code><span class="sig-paren">(</span>uint8_t <em>register_</em>, uint8_t <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice10write_byteE7uint8_t7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write a single byte of data into the specified register. Return true if successful. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv3N9I2CDevice13write_byte_16E7uint8_t8uint16_t">
<span id="_CPPv2N9I2CDevice13write_byte_16E7uint8_t8uint16_t"></span><span id="I2CDevice::write_byte_16__uint8_t.uint16_t"></span><span class="target" id="class_i2_c_device_1acc6eab90a8b90c2d1de0941849a6f1ef"></span>bool <code class="descname">write_byte_16</code><span class="sig-paren">(</span>uint8_t <em>register_</em>, uint16_t <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv3N9I2CDevice13write_byte_16E7uint8_t8uint16_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write a single 16-bit word of data into the specified register. Return true if successful. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Protected Attributes</p>
<dl class="member">
<dt id="_CPPv3N9I2CDevice8address_E">
<span id="_CPPv2N9I2CDevice8address_E"></span><span id="I2CDevice::address___uint8_t"></span><span class="target" id="class_i2_c_device_1aef377e0666a90171e33a5de6f84ed4e5"></span>uint8_t <code class="descname">address_</code><a class="headerlink" href="#_CPPv3N9I2CDevice8address_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="member">
<dt id="_CPPv3N9I2CDevice7parent_E">
<span id="_CPPv2N9I2CDevice7parent_E"></span><span id="I2CDevice::parent___I2CComponentP"></span><span class="target" id="class_i2_c_device_1ae4367cf4729ffa542f6710e4aa7eb923"></span><a class="reference internal" href="#_CPPv312I2CComponent" title="I2CComponent">I2CComponent</a> *<code class="descname">parent_</code><a class="headerlink" href="#_CPPv3N9I2CDevice7parent_E" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div class="footer">
    <a href="/misc/privacy.html">Privacy Policy</a>
  </div>

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113203480-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-113203480-2', {'anonymize_ip': true});
  </script>

  </body>
</html>